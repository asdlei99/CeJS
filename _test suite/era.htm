<?xml version="1.1" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<base target="_blank" />
<style type="text/css">
/* <![CDATA[ */
body {
	color: #118;
	background-color: #ffe;
}

/* copy from game.css */
em {
	color: #f24071;
	font-weight: 900;
}

.timeStamp { /*display:block;*/
	text-align: right;
	color: #9D9D9D;
	font-size: .8em;
}

table {
	color: #137;
	border: 1px solid #58b;
	padding: 0;
}

caption {
	color: #f67;
}

th {
	color: #74b;
	background-color: #eef;
	border-right: 1px solid #888;
	border-bottom: 1pt solid #42b;
}

td {
	border-right: 1px solid #888;
	border-bottom: 1px solid #888;
}

/* ↑ copy from game.css */
#era_input {
	width: 15em;
}

#era_output {
	background-color: #efa;
}

.共存紀年 {
	background-color: #fce;
}

.note {
	color: #367;
	background-color: #eff;
}

.fadeout {
	background-color: #aaa;
}

#note_botton_layer {
	background-color: #eef;
}

.note_botton {
	color: #080;
	background-color: #ccd;
}

.note_botton.selected {
	color: #2c2;
	background-color: #eff;
}

.note_panel {
	/*	display: none; */
	background-color: #eff;
}

.selected {
	background-color: #f74;
}

.unselected {
	color: #333;
	background-color: #aaa;
}

#era_graph {
	display: none;
	width: 100%;
	height: 500px;
}

#era_graph_navigation {
	background-color: #def;
}

#era_graph_navigation>span {
	color: #f94;
}

#pack_source,#pack_result {
	width: 90%;
	height: 4em;
	color: #735;
	background-color: #efa;
}

#pack_result {
	height: 10em;
}

/*]]>*/
</style>

<title>紀年轉換工具</title>
</head>

<body>

	取得
	<input id="era_input" title="來源紀年與日期" /> 之
	<input id="output_format" title="輸出格式" />
	<a href="#"
		onclick="output_numeral=output_numeral==='Chinese'?'':'Chinese';this.className=output_numeral==='Chinese'?'selected':'unselected';
	translate_era();return false;"
		title="輸出中文數字">中</a>
	<a href="#" id="translate" title="執行轉換">→</a>
	<span id="era_output"></span>

	<div id="note_botton_layer"></div>
	<div id="example" class="note_panel"></div>
	<div id="input_history" class="note_panel">
		<!-- TODO: 清除 -->
	</div>
	<div id="FAQ" class="note_panel">
		<ul>
			<li>本工具可作中西曆轉換。</li>
			<li>紀年線圖按滑鼠右鍵可回上一層。</li>
			<li>您可參照測試範例，先輸入來源紀年與日期，後選取輸出格式，按下轉換執行鍵「→」即可獲得轉換結果。</li>
			<li>本工具之資料來源，感謝孫郁興教授提供與指導。</li>
			<li>請幫助測試本工具之正確性。</li>
			<li>本函式庫希望能納入日、韓、越之紀年，以及共和元年(841
				BCE)之後的中國曆數。請幫助我們取得這些王朝之數字化曆數資料。</li>
			<li>本函式庫以歷史上實際施行、使用過的曆數為準。用意不在推導曆法，而在<b>對過去時間作正確轉換</b>。因此僅用查表法，盡可能採用學術界或官方認可的曆數，不作繁複天文計算。更深入的資料結構，可參見
				<a
				href="https://github.com/kanasimi/CeJS/blob/master/data/date/era_data.js">era_data.js</a>。
			</li>
			<li>西曆(<a href="http://en.wikipedia.org/wiki/Common_Era"
				accessdate="2013/4/5 21:9" title="Common Era">CE</a>)以1582年10月15日為改曆分界點，Julian
				calendar（儒略曆）1582年10月4日的下一日為 Gregorian
				calendar（格里高利曆）1582年10月15日。公元初期之前，包括 4 CE 與公元前之日期，則採 <a
				href="http://en.wikipedia.org/wiki/Proleptic_Julian_calendar"
				accessdate="2013/3/31 16:54">proleptic Julian calendar</a>；因此 4 CE,
				1 BCE 為閏年。且 1 CE 的前一年是 1 BCE，沒有 0 CE。另請注意，由於 proleptic Julian
				calendar 的誤差，會造成西元前日期延後，甚至如冬至發生在1月的情況。年代越早，差距越大。尚可參考 <a
				href="http://en.wikipedia.org/wiki/Conversion_between_Julian_and_Gregorian_calendars"
				accessdate="2013/4/5 20:22">Conversion between Julian and
					Gregorian calendars</a>。
			</li>
			<li>本工具在初始化完畢後，不會再透過網路傳輸資料。若下載整組套件，則可離線使用。</li>
			<li>本函式庫除特殊標注外，可精確到日。自<a
				href="http://tambingblog.wordpress.com/2012/12/01/%E5%86%8D%E8%AB%96%E5%AD%90%E6%99%82%E6%8F%9B%E6%97%A5/"
				accessdate="2013/4/8 19:37"
				title="再論子時換日 | 治曆者言 on WordPress.com
據《舊唐書．傅仁均列傳》所載，傅仁均上呈《戊寅元曆》時，列出時辰制度改革之理據，其文曰：「前代造曆，命辰不從子半，命度不起虛中。臣今造曆，命辰起子半，度起於虛六，度命合辰，得中於子，符陰陽之始，會曆術之宜。」傅仁均以子時之中（子正）為一日之始，此後中國歷代曆法所用之時辰算法皆「命子半算外」，即是以子半（子正）為夜半
隋代及以前之時辰制度，除卻東漢《四分曆》外，子時為00:00 – 02:00；唐代至今之時辰制度，子時為23:00 – 01:00。">唐初頒行戊寅元曆後</a>至清末之日期，可精確到時辰；或對清初頒行時憲曆、改日96刻後至清末之日期，可精確到刻。
			</li>
			<li>本函式庫可自行批次轉換紀年時間日期、提供程式化支援，並提供多樣的輸出格式。</li>
			<li>本函式庫與系統時間結合，因此可方便作程式化操作。</li>
			<li>本函式庫為 <a href="https://github.com/kanasimi/CeJS/wiki">CeJS</a>
				計畫的一部分。若有任何建議以及疑問、錯誤回報等，請移步 <a
				href="https://plus.google.com/u/1/101633590909790225455">Google+</a>。
			</li>
		</ul>
		<div class="timeStamp">2013/3/31 13:36:27</div>

		<table>
			<caption>主要資料來源</caption>
			<tr>
				<th>紀年、日期</th>
				<th>直接資料來源</th>
				<th>附注</th>
			</tr>
			<tr>
				<td>1－2100 CE 之中曆</td>
				<td>林晰、邱展毅、劉智漢、鄭垂平、鄭垂平等研究者之<a
					href="http://sinocal.sinica.edu.tw/" accessdate="2013/3/25 22:18">中央研究院
						兩千年中西曆轉換</a> 2013年2月版。
				</td>
				<td><a href="http://sinocal.sinica.edu.tw/lusodoc.html"
					accessdate="2013/3/28 19:24" title="「兩千年中西曆轉換」資料庫介紹">此程式採用的主要是<span
						class="proper_noun">薛仲三</span>、<span class="proper_noun">歐陽頤</span>兩位研究者所編著的<span
						class="creation_title">兩千年中西曆對照表</span></a>(1940)。至 2100 CE 之農曆則<a
					href="http://sinocal.sinica.edu.tw/lusochangelog.html"
					accessdate="2013/4/5 19:8" title="兩千年中西曆轉換工具 - 更新紀錄">似參照氣象局資料</a>。<br />請注意，<em>此中西曆對照表於
						4 CE 停閏</em>。惟本工具之紀元功能採 proleptic Julian calendar，因此修改 4 CE 為閏年。<br />此中西曆轉換於太平天曆的部分有誤。因此須作更正。
				</td>
			</tr>
			<tr>
				<td>太平天曆</td>
				<td>罗尔纲(1991)<span class="creation_title">太平天国史</span>卷三十二 志第十一
					天历 <a
					href="http://lib.ecit.edu.cn/guoxue/%C6%E4%CB%FB%C0%FA%CA%B7%CA%E9%BC%AE/%D7%A8%CC%E2%C0%E0/%C0%FA%CA%B7/%CC%AB%C6%BD%CC%EC%B9%FA%CA%B7/Resource/Book/Edu/JXCKS/TS010014/0061_ts010014.htm"
					accessdate="2013/4/5 18:7" title="">四 天历与夏历阳历对照及简表</a><br />吴善中(1998)太平天国天历干支、礼拜提前一天原因考<br />吴善中(2005)太平天国历法研究述评
				</td>
				<td>雖可顯示年月日干支與星期，但尚無法解析干支。</td>
			</tr>
			<tr>
				<td>明鄭時期</td>
				<td><a
					href="http://tambingblog.wordpress.com/author/tambingblog/"
					accessdate="2013/4/8 19:48"
					title="Posts by 譚冰 | 治曆者言 on WordPress.com">譚冰</a>（陳泳昌）(2012)<a
					href="http://tambingblog.wordpress.com/2012/09/01/%E8%A1%93%E6%95%B8%E5%BE%B5%E9%A9%97%E9%97%9C%E9%8D%B5%E4%B9%8B%E7%90%86/"
					accessdate="2013/4/8 19:49"
					title="術數徵驗關鍵之理 | 治曆者言 on WordPress.com">術數徵驗關鍵之理</a><br />Wikipedia
					相關頁面。</td>
				<td>現雖尚未能確認「術數徵驗關鍵之理」所載是否為考證過之朔閏資料，但經交叉比對（見<a
					href="https://docs.google.com/spreadsheet/pub?key=0AnMb73DFKnSFdC1uZ2kzNFpZWXNmeDMtRnp6RUxBQXc"
					accessdate="2013/4/13 19:44">明鄭時期清《時憲曆》與明《大統曆》曆數比對</a>），其與「中央研究院
					兩千年中西曆轉換」僅於最後一個月（1661年中曆12月）有出入。因此先以其所載為準。惟此資料未能含括永曆37年(1683
					CE)。現永曆37年採用的是清時憲曆，但<em>極可能為錯誤資料！</em><br />數位典藏與自動推論實驗室
					數位典藏研究發展中心 <a href="http://140.112.30.230/datemap/index.php"
					accessdate="2013/4/5 19:2"
					title="中西曆對照查詢系統（明代以降） || Chinse and
						Western Dates Mapping System (Later than Ming Dynasty)">中西曆對照查詢系統（明代以降）</a>的資料沿用清時憲曆，因此恐非實際施行、使用過的曆數。<br />因非身在學界，若有能提供相關資料，包括王叔武(1979)<a
					href="http://www.cnki.com.cn/Article/CJFDTotal-SXZX197903021.htm"
					accessdate="2013/4/8 23:51"
					title="南明史料朔闰考异——《行在阳秋》札记
《思想战线》 1979年03期">南明史料朔闰考异——《行在阳秋》札记</a>」一文者，不勝感謝。
				</td>
			</tr>
			<tr>
				<td>1500－841 BCE 之中國地區朔閏<em>處理中</em></td>
				<td>许剑伟(2011 v5.05)寿星天文历</td>
				<td>寿星天文历於 721 BCE 起的數據主要採用张培瑜教授 1997年第二版<span
					class="creation_title">三千五百年历日天象</span>。
				</td>
			</tr>
			<tr>
				<td>841－1 BCE 之中曆<em>處理中</em></td>
				<td>徐锡祺(1997)西周（共和）至西汉历谱</td>
				<td>未以寿星天文历（<span class="creation_title">三千五百年历日天象</span>）為準。张培瑜<span
					class="creation_title">三千五百年历日天象</span>與董作賓(1960)<span
					class="creation_title">中國年曆總譜</span>兩書曆數獲得方法不同，<a
					href="http://www.lw23.com/paper_107739541_8/"
					accessdate="2013/4/5 19:24"
					title="宋会群(1998)先秦年代学研究的理论与方法初探
（3）与先秦授时或制历有关的天象发生时间的历日干支。 这部分干支及其与公历对照的日期主要源于《三千五百年历日天象》一书。
（4）根据早期历法推出的朔闰表，如董作宾《中国年历总谱》、黄伯录《中西年月通考》及《天象》一书中的《春秋朔闰表》和《战国朔闰表》等。

共和以前的西周历法和商代历法目前还都不清楚，用后世历法数据推出的朔闰干支也未必正确。因此这些年历的先秦部分，有不少可商之处。">尚有可議之處</a>。據<span
					class="creation_title">三千五百年历日天象</span>一書前言，「远古时期，中国早期历法是根据观测实际天象..颁行的，而不是事先推步得出的。」因此原先欲以此書為準，未來若有更可靠之來源時再作更改。惟近年來不少書簡出土，發現舊的曆譜有不少謬誤，只得取用較新的資料。<br />經黃一農教授<a
					href="http://hss.nthu.edu.tw/~ylh/list.php?category=%E6%9B%86%E6%B3%95%E5%AD%B8%E5%8F%B2"
					accessdate="2013/4/8 23:1"
					title="黃一農，2001，〈漢初百年朔閏析究──兼訂《史記》和《漢書》紀日干支訛誤〉，《中央研究院歷史語言研究所集刊》（臺北），第72本第4分，頁753-800。">漢初百年朔閏析究</a>一文介紹，發現有<span
					class="creation_title">西周（共和）至西汉历谱</span>一書，決定用之。惟此書尚未有電子化版本，因此尚須作番處理，恐需耗些時日。<br />另，於
					246－104 BCE 的部分，仍將參照下述更後期考校的來源。
				</td>
			</tr>
			<tr>
				<td>246－104 BCE<em>處理中</em></td>
				<td>李忠林(2012)秦至汉初(前246 至前104)历法研究———以出土历简为中心</td>
				<td>未採用张培瑜(2007)根据新出历日简牍试论秦和汉初的历法</td>
			</tr>
			<tr>
				<td>日本の旧暦、和暦 593－1872 CE</td>
				<td>Wikipedia <a
					href="http://ja.wikipedia.org/wiki/%E5%A4%A9%E7%9A%87%E3%81%AE%E4%B8%80%E8%A6%A7"
					accessdate="2013/4/11 19:40">天皇の一覧</a>、<a
					href="http://ja.wikipedia.org/wiki/%E5%85%83%E5%8F%B7%E4%B8%80%E8%A6%A7_(%E6%97%A5%E6%9C%AC)"
					accessdate="2013/4/11 19:44">日本の元号一覧</a>。<br /> <span
					class="proper_noun" title="かみつな しゅうじ">上綱秀治</span>さんの<a
					href="http://www.asahi-net.or.jp/~ax2s-kmtn/ref/month_ls.html"
					accessdate="2013/4/5 17:52">月の大小</a>
				</td>
				<td><em>情報源によって多少の違いがあります。</em>並んでみた結果（<a
					href="https://docs.google.com/spreadsheet/pub?key=0AnMb73DFKnSFdFBxQlZTQ3pRY19ySzBKUW1rQlhSc1E"
					accessdate="2013/4/11 19:38">旧暦毎月日数の比較</a>をご覧ください）、<span
					class="proper_noun" title="かみつな しゅうじ">上綱秀治</span>さんの資料に決めました。<br />
					<em>旧暦資料來源有些許出入。</em>請參照<a
					href="https://docs.google.com/spreadsheet/pub?key=0AnMb73DFKnSFdFBxQlZTQ3pRY19ySzBKUW1rQlhSc1E"
					accessdate="2013/4/11 19:38">旧暦毎月日数の比較</a>。在經過交叉比對後，本工具暫採用上綱秀治「月の大小」作為來源。
					<hr />「月の大小」は以下の文献を参考にした。<br />暦を知る事典 / 岡田芳朗[ほか]著 東京堂出版, 2006.5<br />日本暦日原典.
					第4版 / 内田正男編著 雄山閣出版, 1992.6<br />日本暦日総覧 / 古川麒一郎[ほか]共編 本の友社,
					1992.5-1995.2</td>
			</tr>
			<tr>
				<td>日本の旧暦 1872－2070 CE</td>
				<td>こよみのページ<a href="http://koyomi.vis.ne.jp/kyuureki.htm"
					accessdate="2013/4/5 18:47" title="旧暦（和暦）のページ">旧暦のページ</a></td>
				<td>當前所能獲得之來源以こよみのページ為主。其他可參照來源為海上保安庁海洋情報部<a
					href="http://www1.kaiho.mlit.go.jp/KOHO/reki/kyuu9700.htm"
					accessdate="2013/4/5 18:42">1997-2010年の新暦・旧暦対応表</a>(非公式)，惟尚不夠全面。
				</td>
			</tr>
			<tr>
				<td>明治以降の和暦 1872 CE－</td>
				<td>Wikipedia 相關頁面。</td>
				<td>明治5年（1872年）に、従来の太陰太陽暦を廃して翌年から太陽暦を採用することが布告された。「來ル十二月三日ヲ以テ明治六年一月一日ト被定候事」(<a
					href="http://ja.wikipedia.org/wiki/%E3%82%B0%E3%83%AC%E3%82%B4%E3%83%AA%E3%82%AA%E6%9A%A6#.E6.97.A5.E6.9C.AC.E3.81.AB.E3.81.8A.E3.81.91.E3.82.8B.E3.82.B0.E3.83.AC.E3.82.B4.E3.83.AA.E3.82.AA.E6.9A.A6.E5.B0.8E.E5.85.A5"
					accessdate="2013/4/1 23:29">グレゴリオ暦#日本におけるグレゴリオ暦導入</a>)
				</td>
			</tr>
			<tr>
				<td>滿洲國曆數</td>
				<td><a
					href="http://ja.wikipedia.org/wiki/%E5%A4%A7%E5%90%8C_(%E6%BA%80%E5%B7%9E)"
					accessdate="2013/4/1 19:32" title="大同 (満州)">大同 (満州)</a>.
					(2013/3/17). In Wikipedia. Retrieved 2013/4/1.<br /> <a
					href="http://ja.wikipedia.org/wiki/%E5%BA%B7%E5%BE%B3"
					accessdate="2013/4/1 19:33">康徳</a>. (2013/3/16). In Wikipedia.
					Retrieved 2013/4/1.<br /> <a href="http://www.jacar.go.jp/"
					accessdate="2013/4/1 19:16" title="国立公文書館 アジア歴史資料センター">アジア歴史資料センター</a>（満州国建国宣言、満洲国
					時憲書）<br />姜念东. (1980). 伪满洲国史. 吉林人民出版社.<br />解学诗. (1995). 伪满洲国史新编.
					人民出版社.</td>
				<td>滿洲國採用 Gregorian calendar，與當時的日本相同。</td>
			</tr>
			<tr>
				<td>韓曆<em>研究中</em></td>
				<td></td>
				<td>因不諳韓語，因此恐僅能獲得大概年分。</td>
			</tr>
			<tr>
				<td>越南曆<em>研究中</em></td>
				<td></td>
				<td><a
					href="http://www.nomna.org/Lich-Viet-Nam/Am-lich-Viet-Nam/50-Gioi_thieu_Am_lich_Viet_Nam"
					accessdate="2013/4/5 18:56" title="Âm lịch Việt Nam">「精確到日」最多恐怕僅能上溯至
						1306 CE</a>。且因不諳越南語，因此恐僅能獲得大概年分。</td>
			</tr>
			<tr>
				<td>تقويم هجري(伊斯蘭曆、回曆)<em>研究中</em></td>
				<td></td>
				<td></td>
			</tr>
		</table>
	</div>

	<div id="era_graph">
		<div id="era_graph_navigation">導覽列</div>
	</div>

	<div id="calendar"></div>

	<div id="pack_data">
		<textarea id="pack_source">/文宗/天曆|1329/8/25~|2/8=30;29;29;30;30	29;30;30;29</textarea>
		<br /> <em>請注意：本欄僅供開發人員使用。</em> <a href="#"
			onclick="CeL.get_element('pack_result').value=CeL.era.pack(CeL.get_element('pack_source').value
//為方便所作的權益措施。
.replace(/\\t/g,'\t'));return false;">壓縮紀年的曆數資料</a>
		| <a href="#"
			onclick="var calendar=CeL.era.set(CeL.get_element('pack_source').value.replace(/\\t/g,'\t'),{extract_only:true}).calendar;calendar.forEach(function(year_data,index){if(year_data.leap)year_data[year_data.leap]='閏'+year_data[year_data.leap];calendar[index]=year_data.join('\t');});CeL.get_element('pack_result').value=calendar.join('\n');return false;">解析紀年的曆數資料</a><br />
		<textarea id="pack_result"></textarea>
	</div>

	<hr />
	紀年轉換工具 訊息提示與紀錄欄：
	<div id="panel_for_log">
		<b style="color: red;">已載入網頁。正進行程式初始化作業，請稍待片刻…</b>
	</div>

	<script type="text/javascript" src="../ce.js">{"run":"era.js"}</script>
	<script type="text/javascript">
	CeL.env.same_origin_policy = true;
	</script>

	<!-- 
	<script type="text/javascript" src="http://www.google.com/jsapi"></script>
	-->

</body>
</html>
