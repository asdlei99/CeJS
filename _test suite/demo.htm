<?xml version="1.1" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<style type="text/css">
/* <![CDATA[

	CSS reset
*/
@import url(lib/reset.css);

body{margin:0;padding:0;}
.test_toggle{color:#e6d;display:inline;cursor:pointer;}
.test_panel{display:none;}

#address,#legal_domicile{font-size:.9em;}
/*]]>*/</style>

<!--
<script type="text/javascript" src="http://sites.google.com/site/cejsph/lib/ce.txt"></script>
<script type="text/javascript" src="http://neterr.hostwq.net/JS/ce.js"></script>
-->

<script type="text/javascript">//<![CDATA[
	//window.status=11;
	//for(var i=0,j=0;i<1e8;i++)j++;
//]]></script>


<!--
http://code.jquery.com/jquery-nightly.js
-->

<script type="text/javascript" src="../ce.js">
{
	"set_run" : "test.js"
}
</script>


<script type="text/javascript">//<![CDATA[

/*
TODO:
http://www.11gz.com/blog/2010/03/20/html5-doctype-use/

JavaScript Shell
http://nio127.blogspot.com/2008/11/javascript-shell-web-developerhacker.html

本範例於 MSIE 8.0 local 會要求主動式內容!
*/

//	預防彈出警告視窗
CeL.log.max_length = 20;

CeL.set_debug();
//CeL.set_debug(2);

//	相對於 library 本身來說的路徑
CeL.include_module_resource('../../game/game.css');

try {
	dojo.require("dojo.NodeList-fx");
	//dojo.require("dojo.NodeList-fx33");
} catch (e) {
	//CeL.debug(e.message);
}

//CeL.debug(111);
//CeL.debug(CeL.simplify_path('a/../b'));
//if(CeL.warn)CeL.warn('a WARNING');

setTimeout(function() {
	//alert(document.body.innerHTML);
	}, 200);

function test1() {
	CeL.warn('a WARNING level message');
}




//]]></script>
<title>CeL test / demo suite</title></head>

<body class="bgn">


<div id="error_load_panel" style="color:#f00;background-color:#ff8;padding:.5em;/* hack for NS4 */position:absolute;top:-800px;*top:0px;_top:-800px/* hack for IE7 @ wine: no javascript allowed. ** 事實上應該對所有讀得懂 CSS 但 javascript 無作用的 browser 作處理。 */;">
<hr />
<h2>Loading error</h2>
JavaScript doesn't work or XMLHttpRequest loading error?<br />
You may need to check the configuration of the browser, <a href="#" onclick="history.go(0);return false;">reload the page</a>, or start from <a href="basic/basic_test_1.htm">the basic test</a>.
<div id="loading_error_message"></div>
<hr />
</div>



<div onclick="CeL.toggle_display('eval_panel');" class="test_toggle">eval test</div>
<div id="eval_panel" class="test_panel" style="display:block;">
<input id="question" value="43/21"/>
<b onclick="show_question();" style="cursor: pointer;">show</b>
|
<b onclick="run_code();" style="cursor: pointer;">run</b>
<input id="run_times" style="width:5em;"/>
times

<div id="panel_for_SVG">
</div>

<div id="panel_for_test">
</div>
<!--
<OBJECT id=tts_flash codeBase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 width=18 height=18><PARAM NAME="_cx" VALUE="476"><PARAM NAME="_cy" VALUE="476"><PARAM NAME="FlashVars" VALUE=""><PARAM NAME="Movie" VALUE="http://www.gstatic.com/translate/sound_player.swf"><PARAM NAME="Src" VALUE="http://www.gstatic.com/translate/sound_player.swf"><PARAM NAME="WMode" VALUE="Transparent"><PARAM NAME="Play" VALUE="0"><PARAM NAME="Loop" VALUE="-1"><PARAM NAME="Quality" VALUE="High"><PARAM NAME="SAlign" VALUE=""><PARAM NAME="Menu" VALUE="-1"><PARAM NAME="Base" VALUE=""><PARAM NAME="AllowScriptAccess" VALUE="always"><PARAM NAME="Scale" VALUE="ShowAll"><PARAM NAME="DeviceFont" VALUE="0"><PARAM NAME="EmbedMovie" VALUE="0"><PARAM NAME="BGColor" VALUE=""><PARAM NAME="SWRemote" VALUE=""><PARAM NAME="MovieData" VALUE=""><PARAM NAME="SeamlessTabbing" VALUE="1"><PARAM NAME="Profile" VALUE="0"><PARAM NAME="ProfileAddress" VALUE=""><PARAM NAME="ProfilePort" VALUE="0"><PARAM NAME="AllowNetworking" VALUE="all"><PARAM NAME="AllowFullScreen" VALUE="false"></OBJECT>
-->

<hr />
</div>


<span>|</span>
<div id="choose" onclick="CeL.toggle_display('choose_panel');" class="test_toggle">choose test</div>
<div id="choose_panel" class="test_panel">
<h3>地址住址輸入表單</h3>
<div id="legal_domicile">戶籍地址 </div>
<div id="address">通訊地址 </div>

<div id="account">匯款帳號 </div>

<div id="education">教育程度 </div>

<hr />

attach test:<br />
span: <span id="attach_span">test: </span>
input: <input id="attach_input" value="input test" style="background-color:#ffb;"/>
select: <select id="attach_select"><option value="A">option A</option><option value="B">option B</option><option value="C">option C</option><option value="select" selected="selected">option selected</option></select>
hr: <hr id="attach_hr" style="width:2em;"/>

<hr />
</div>


|
<div onclick="CeL.toggle_display('change_base_panel');" class="test_toggle">換底</div>
<div id="change_base_panel" class="test_panel">
number（正負整數、分數與小數）: <input id="number1" value="1000"/>
in base: <input id="base1" value="10" style="width:3em;"/>
<br />
change to base: <input id="base2" value="2" style="width:3em;"/>
<a href="#" onclick="return calc_base();">do</a>
<hr />
</div>


|
<div onclick="CeL.toggle_display('complement_panel');" class="test_toggle">補數</div>
<div id="complement_panel" class="test_panel">
number（整數）: <input id="number" value="1000"/>
base: <input id="base" value="2" style="width:3em;"/>
bits: <input id="bits" value="8" style="width:3em;"/>
<label for="diminished" title="diminished radix complement"><input type="checkbox" id="diminished"/>diminished</label>
<a href="#" onclick="return calc_complement();">←</a>
<a href="#" onclick="return calc_value();">→</a>
（正負整數）<input id="complement_value" value="16"/><span class="down">10</span>
<hr />
</div>


|
<div onclick="CeL.toggle_display('Hamming_panel');" class="test_toggle">Hamming code</div>
<div id="Hamming_panel" class="test_panel">
data(/^[01]{,20}$/): <input id="h_data" value="1101" pattern="[01]{0,20}"/>
<a href="#" onclick="return Hamming.dec();" title="decode">←</a>
<a href="#" onclick="return Hamming.enc();" title="encode">→</a>
code(/^[01]{,20}$/): <input id="h_code" pattern="[01]{0,20}"/>
<label for="h_reverse"><input type="checkbox" id="h_reverse"/>reverse</label>
|
show
<a href="#" onclick="Hamming.show(8);return false;" title="encode">8</a>
<a href="#" onclick="Hamming.show(16);return false;" title="encode">16</a>



<hr />
</div>


|
<b style="cursor:pointer;" onclick="start_count(1);return false;">start count</b>
<div id="clock" style="font-size:26em;font-family:'FZZhunYuan-M02','Maiandra GD';clear:both;"></div>



<hr style="clear: both;" />
[test suite] log panel:
<!--
<a href="#" onclick="clipboardFunction(0,'panel_for_log');return false;">paste code</a>
<b class="sp">|</b>
<a href="#" onclick="var t=CeL.Log.get_log();clipboardFunction(t?2:1,t?(t+'').replace(/^\[\d+\]/,''):'result');return false;">copy result</a>
<b class="sp">|</b>
-->
<a href="#" onclick="CeL.Log.clear();return false;" title="清除訊息">clear log</a>
<b class="sp">|</b>
<a href="#" onclick="CeL.Log.toggle();return false;" title="顯示/隱藏訊息">show/hidden log</a>
<div id="panel_for_log">
Page loaded. Initializing the framework. Please wait..
</div>



<script type="text/javascript">//<![CDATA[


//	2010/4/17 09:54:35
//	TODO: stop/pause
function start_count(restart) {
	var timer, timeout = 10 * 60 * 1000, timeout1 = 2 * 60 * 1000, diff = 1000;// 100

	// CeL.log(start_count.start_stamp);
	if (restart || !start_count.start_stamp) {
		start_count.start_stamp = new Date;
		// 若之前已經在跑則 return
		if (start_count.handle)
			return;
	}

	timer = parseInt((timeout - (new Date - start_count.start_stamp)) / 1000) * 1000;
	if (Math.abs(timer - timeout1) < 4000)
		// 提醒
		window.focus();
	// 顯示
	CeL.get_element('clock').innerHTML = timer > timeout1 ? CeL
			.format_date(timer) : '<span style="color:#f88">'
			+ CeL.format_date(timer) + '</span>';
	CeL.get_element('clock').style.marginTop = '50pt';

	if (timer > 0)

		start_count.handle = setTimeout(function() {
			start_count();
		}, diff);
}

	/*
	 test short circuit
	 http://hi.baidu.com/happy8d/blog/item/c6bc1146b4228e016b63e5d9.html
	 把 A && B 對調，變成：B && A，結果還是 B 會先被 evaluate。
	 test A||B
	 */

	var SVG_object, Hamming;
	var OtS = Object.prototype.toString;
	var is_Function = CeL.object_tester('Function', 'OtS');

	function show_question() {
		var num = CeL.get_element('question').value, m = num
				.match(/(\d+)([+\-*\/])(\d+)/);

		if (m)
			try {
				CeL.SVG['draw_' + {
					'+' : 'addition',
					'-' : 'subtraction',
					'*' : 'multiplication',
					'/' : 'long_division'
				}[m[2]]](m[1], m[3], SVG_object);
			} catch (e) {
				CeL.err(e);
			}
	}

	function run_code() {
		var i = 0, t, v = CeL.get_element('question').value, times = parseInt(CeL
				.get_element('run_times').value);
		try {
			if (times > 1)
				eval('for (t = new Date; i < ' + times + '; i++){' + v
						+ '}; t = new Date - t;'), v = t + ' ms / ' + times + ' = ' + t
						/ times + ' ms. Get: ' + eval(v);
			else
				v = eval(v);
			CeL.log(v);
		} catch (e) {
			if (t)
				CeL.log('error @ ' + i + '/' + times + '(use ' + (new Date - t)
						+ 'ms)');
			CeL.err(e);
		}
	}

	function calc_base() {
		try {
			var v = CeL.get_element('number1').value, m = v
					.match(/^\s*([\+\-]?\d+)\s*\/\s*(\d+)\s*$/);
			v = m ?
			//	正負分數
			new CeL.quotient(m[1], m[2]) :
			//	正負整數與小數
			CeL.quotient.parse_base(CeL.get_element('number1').value
					.toLowerCase(), CeL.get_element('base1').value);
			CeL.log('換底: '+v.toString(3) + '<span class="down">10</span> → ' + v.to_base(CeL.get_element('base2').value).replace(/_([^\(]+)/,'_<i style="text-decoration:overline">$1</i>')+'<span class="down">'+CeL.get_element('base2').value+'</span>');
		} catch (e) {
			CeL.err(e);
		}
		return false;
	}

	function calc_complement() {
		var c = new CeL.complement;
		c.bits = CeL.get_element('bits').value;
		c.from(0, CeL.get_element('base').value,
				CeL.get_element('diminished').checked);
		c.set(CeL.get_element('complement_value').value);
		CeL.get_element('number').value = c.to();
		return false;
	}

	function calc_value() {
		var c = new CeL.complement;
		c.bits = CeL.get_element('bits').value;
		c.from(CeL.get_element('number').value, CeL.get_element('base').value,
				CeL.get_element('diminished').checked);
		CeL.get_element('complement_value').value = c.valueOf();
		return false;
	}

	/**
	 * 初始作業
	 * @return
	 */
	function initialization_work() {

		//	test the biggest 10^?	取得能準確計算的最大值
		var biggest_exponent_of_10 = 0, test_num = 1;
		while (
		//parseInt(test_num*=10)-1===test_num-1
		//	/^9+$/.test(parseInt((test_num*=10)-1))
		(test_num *= 10) - (test_num / 2 - 1) * 2 === 0)
			biggest_exponent_of_10++
			//	https://bugzilla.mozilla.org/show_bug.cgi?id=553799
			//,CeL.debug('10^'+biggest_exponent_of_10+'='+test_num+'; '+(parseInt(test_num-1,10)))
			;
		//CeL.debug('biggest exponent of 10: ' + biggest_exponent_of_10);


		sr( [ 'data.code.compatibility', 'data.native' ], function() {
			Number.prototype.to_fixed = CeL.to_fixed;

			//CeL.debug(CeL.is_type(window.navigator));
			if (window.navigator) {
				//	http://blogs.msdn.com/ie/archive/2010/03/23/introducing-ie9-s-user-agent-string.aspx
				CeL.debug('User agent: ' + navigator.userAgent);
				for ( var i in navigator)
					//CeL.debug('navigator.' + i + ' = ' + navigator[i])
					;
			}

			//CeL.debug(CeL.is_type(window.ScriptEngineMajorVersion));
			//	for IE only
			if (window.ScriptEngineMajorVersion)
				CeL.debug('Script engine: ' + ScriptEngine() + ' '
						+ ScriptEngineMajorVersion() + '.'
						+ ScriptEngineMinorVersion() + '.'
						+ ScriptEngineBuildVersion(), 2);
		});

		CeL.debug('no-exist module test', 2);
		//	下面測試在 MSIE6 中會發生 throw
		sr('code.log.no_exist_module_to_test', function(){
			CeL.debug('no-exist module test end.');
		});

		//CeL.warn('a WARNING level message');

		//	base test
		//CeL.log('split length: '+'.'.split(/\./).length);

		//if(0)CeL.debug(2223);test1();

		CeL.debug('SVG', 2);
		sr('interact.integrate.SVG', function() {

			//CeL.debug('CeL.SVG = ' + CeL.SVG, 0, 1);
			//CeL.debug('CeL.log = ' + CeL.log, 0, 1);
			//CeL.debug('CeL.net.SVG = ' + CeL.net.SVG);
			//alert(CeL.SVG);
			//CeL.debug(CeL.drawLongDivision);
			SVG_object = new CeL.SVG(20, 20);
			//CeL.debug('type of SVG_object = ' + CeL.is_type(SVG_object,0,1));
			SVG_object.attach('panel_for_SVG').show(1);
			//CeL.debug('SVG panel = ' + SVG_object);
			//alert(SVG_object);

			//CeL.SVG.draw_long_division(452, 34, SVG_object);
			//CeL.draw_long_division(10000000000, 7, SVG_object);
			//var SVG_object=CeL.SVG.draw_long_division(100000, 7);
			//SVG_object.attach('panel_for_SVG').show(1);
			//SVG_object.show();
			//CeL.SVG.draw_long_division(1000000000000, 432, SVG_object);

		});

		/*
		CeL.use('code.reorganize');
		var c = CeL.get_file('../ce.js')+CeL.get_file('../code/log.js');
		c = CeL.get_various_from_code(c);
		c = CeL.get_code_from_generated_various(c);
		CeL.debug(c.replace(/\n/g,'<br \/>'));
		 */

		CeL.debug('DOM', 2);
		sr('interact.DOM', function() {

			//CeL.copy_to_clipboard('已經複製');
			//CeL.debug(CeL.parse_URI('ftp://ftp.is.co.za/rfc/rfc1808.txt').path);

		});

		//CeL.log('long interger test: 36578368923657238645067315413986475314666666666666666666666666864506731541398647531466666666666666666666666666666666666666666666666666666666666666666666666666666622222222222222222222222222222222222222');

		CeL.debug('phase: math test', 2);
		sr( [ 'data.math', 'data.math.quotient' ], function() {
				//var p = 20374345, q = CeL.data.math.floor_sqrt(p = p * p - 1); CeL.log(q + '_$tag__' + (q * q) + '_$tag_' + p + '_$tag_' + (++q * q));

				//CeL.debug(CeL.get_module_path('math.quotient')+': '+CeL.is_loaded('math.quotient')+': '+CeL.data.math.quotient);
				//var q1=CeL.quotient.parse_base('.110011001100110011001100110011001100',2);
				//CeL.log(q1.to_base());
				//q1=CeL.quotient.parse_base('.110011001100110011001100110011001100110011001100110011001100110011001100',2);
				//CeL.log(q1.to_base());
				//CeL.log(CeL.quotient.parse_base('65.43'.toLowerCase(),8).to_base(16).replace(/_([^\(]+)/,'__$tag_______________________________$1_$ta'));
				//CeL.log((new CeL.quotient(3,4)).count('*',new CeL.quotient(2,7)).reduce().to_print_mode());
				//CeL.log(CeL.quotient.turnBaseQ('4565.5',16).to_print_mode(3,2));

				/*
				 var c1 = new CeL.complement, c2 = new CeL.complement;
				 c1.bits = c2.bits = 4;
				 //c1.bits = 16;
				 //c1.from(1000 , 1);
				 //c1.set(-1000);
				 //CeL.log(c1.valueOf() + ', ' + c1.to());
				 for ( var i = -9; i < 10; i++ ){
				 c1.set(i);
				 c2.from(c1.to());//c2.from(c1.to(0,1),0,1);
				 CeL.log(c2.valueOf() + ', ' + c1.valueOf() + ', ' + c1.to());//CeL.log(c2.valueOf() + ', ' + c1.valueOf() + ', ' + c1.to(0,1));
				 }
				 */
			});

		sr('data.math.Hamming', function() {
			Hamming = CeL.data.math.Hamming;
			//Hamming.show(16);
			Hamming.dec = function() {
				try {
					Hamming.reverse = CeL.get_element('h_reverse').checked;
					CeL.get_element('h_data').value = Hamming.decode(CeL
							.get_element('h_code').value);
				} catch (e) {
					CeL.err(e);
				}
				return false;
			};
			Hamming.enc = function() {
				try {
					Hamming.reverse = CeL.get_element('h_reverse').checked;
					CeL.get_element('h_code').value = Hamming.encode(CeL
							.get_element('h_data').value);
				} catch (e) {
					CeL.err(e);
				}
				return false;
			};

		});

		if (0)
			CeL.use('data.code.API', function() {

				CeL.use_API('Bing', function() {
					//	http://msdn.microsoft.com/en-us/library/ff512406.aspx
					//	http://msdn.microsoft.com/en-us/library/ff512445.aspx
					Microsoft.Translator.translate('Hello!', 'en', 'zh-TW',
							function(translation) {
								CeL.log(translation);
							});
				});

				if (0)
					CeL.use_API('GAPI', function() {
						google.load("search", 1);
						google.setOnLoadCallback(function() {
							if (new google.search.SearchControl())
								CeL.log('API load OK.');
						});
					});
			});

		if (0)
			rrtt = CeL.new_node( {
				object : [ {
					param : null,
					name : "a",
					value : "as"
				} ],
				//data : "h",
				id : 'test_o'
			}, 'panel_for_test');

		//CeL.get_element('panel_for_test').innerHTML='_$tag_____________________________________________________________________________________________________________________________________________________________________________________<PARAM NAME="_cx" VALUE="476">_$tag_________________________<PARAM NAME="FlashVars" VALUE="">_$tag_________________________________________________________________________<PARAM NAME="Src" VALUE="http://www.gstatic.com/translate/sound_player.swf">_$tag___________________________________<PARAM NAME="Play" VALUE="0">_$tag_________________________<PARAM NAME="Quality" VALUE="High">_$tag_________________________<PARAM NAME="Menu" VALUE="-1">_$tag_______________________<PARAM NAME="AllowScriptAccess" VALUE="always">_$tag_______________________________<PARAM NAME="DeviceFont" VALUE="0">_$tag______________________________<PARAM NAME="BGColor" VALUE="">_$tag___________________________<PARAM NAME="MovieData" VALUE="">_$tag___________________________________<PARAM NAME="Profile" VALUE="0">_$tag_________________________________<PARAM NAME="ProfilePort" VALUE="0">_$tag_____________________________________<PARAM NAME="AllowFullScreen" VALUE="false">_$tag____'
		/*
		 //CeL.get_element('test_o').data='dd';
		 CeL.get_element('panel_for_test').appendChild(rrtt);
		 CeL.log(CeL.get_element('test_o').parentNode.innerHTML.replace(/</g,'&lt;'));
		 CeL.log(CeL.get_element('test_o').outerHTML.replace(/</g,'&lt;'));
		 //CeL.get_element('test_o').outerHTML=CeL.get_element('test_o').outerHTML.replace(/<OBJECT\s/,'<OBJECT data="'+'ddfsd'+'"');
		 alert(CeL.get_element('test_o').parentNode.innerHTML.replace(/<OBJECT\s/,'<OBJECT data="'+'ddfsd'+'"'));
		 //alert((CeL.get_element('test_o').outerHTML));
		 alert(CeL.get_element('test_o').parentNode.innerHTML);
		 CeL.log(CeL.get_element('test_o').outerHTML.replace(/</g,'&lt;'));
		 */
		//swfobject.embedSWF("http://www.gstatic.com/translate/sound_player.swf", "panel_for_test", "18", "18", "9.0.0");
		//CeL.log(CeL.get_element('panel_for_test').outerHTML.replace(/</g,'&lt;'));
		/*
		 scope bug test
		 https://mail.mozilla.org/pipermail/es-discuss/2008-September/007498.html
		 */

		/*
		 CeL.debug('phase: data test',2);
		 CeL.use('data');

		 test_num=1125;
		 CeL.log(test_num+' → '+CeL.to_SI_prefix(test_num,5));
		 test_num*=1024;
		 CeL.log(test_num+' → '+CeL.to_SI_prefix(test_num));
		 */

		//CeL.new_node({div:[1234,':',{p:{b:null}}]},0);
		//var handle_select = function (e) { var s = CeL.get_selection(); if (s && s.text) CeL.debug('select @' + this + '(' + s.element + ')' + ' (' + s.left + '+' + s.width + ',' + s.top + '+' + s.height + '), (' + e.pageX + ',' + e.pageY + '): ' + s.text); };
		//CeL.add_listener('mouseup', handle_select, 'panel_for_log');
		//$('#panel_for_log').bind('mouseup', handle_select);
		//$('#panel_for_log').select(function () { CeL.log(this); });
		if (0) {
			var cookie_name = 'cookie test';
			CeL.debug(cookie_name + ': ' + CeL.get_cookie(cookie_name));
			CeL.set_cookie(CeL.set_cookie.f.set_root); //	Gecko need this
			CeL.set_cookie(cookie_name, 'test~~"OK"!');
		}

		CeL.debug('form.select_input test', 2);
		sr(
				[ 'interact.form.address', 'interact.form.bank_account',
						'interact.form.education' ],
				function() {

					// function aaa(v){alert('mmm='+mmm);var r={};r[v]=222;return r;}
					// var fff3=33;eval('var mmm=1;(function(){var included=aaa("fff");alert(included.fff);})()');alert(fff);
					//CeL.use('net.form.select_input');
					if (0)
						CeL.use( [ 'interact.form.address',
								'interact.form.bank_account',
								'interact.form.education' ]);

					var qi = new CeL.select_input('question', [ '4232+552',
							'4232-552', '4232*34', '4232/34' ], 'includeKeyWC');
					//qi.attach('question');
					//qi.setSearch('includeKeyWC');

					CeL.debug('phase: attach test', 2);
					var a_sp = new CeL.select_input('attach_span', [ 5, 6, 55,
							555, 7 ]), a_i = new CeL.select_input(0, [ 1, 2, 3,
							4, 5 ]), a_s = new CeL.select_input, a_h = new CeL.select_input;

					//sl('set attach_span: '+a_sp.loaded);
					a_sp.attach('attach_span');
					a_sp.setSearch('includeKeyWC');
					//sl('set attach_input');
					a_i.attach('attach_input');
					a_i.setSearch('includeKeyWC');
					//sl('set attach_select');
					a_s.attach('attach_select');
					a_s.setSearch('includeKeyWC');

					a_h.attach('attach_hr');
					a_h.setAllList( [ 1, 2, 3, 6 ]);
					a_h.setSearch('includeKeyWC');

					CeL.debug('attach set', 2);
					(new CeL.select_input('run_times', [ 1, 100, 1000, 10000,
							100000, 1000000, 10000000 ], 'always'))
							.set_verify('|natural');

					//(new CeL.select_input('number1')).set_verify('integer');
					(new CeL.select_input('base1', [ 2, 8, 10, 16 ], 'always'))
							.set_verify('natural');
					(new CeL.select_input('base2', [ 2, 8, 10, 16 ], 'always'))
							.set_verify('natural');

					//(new CeL.select_input('number')).set_verify(/^-?\d+$/);
					(new CeL.select_input('base', [ 2, 8, 10, 16 ], 'always'))
							.set_verify('natural');
					(new CeL.select_input('bits', [ 4, 8, 16 ], 'always'))
							.set_verify('natural');
					(new CeL.select_input('complement_value'))
							.set_verify('integer');

					//	just setup pattern
					new CeL.select_input('h_data');
					new CeL.select_input('h_code');

					CeL.debug('set education form', 2);
					var education_form = new CeL.education.TW('education');

					CeL.debug('set account form', 2);
					var accountF = new CeL.bank_account.TW('account');

					CeL.debug('set address form', 2);
					var addF = new CeL.address.TW('address', 'address_');
					var domicileF = new CeL.address.TW('legal_domicile',
							'legal_domicile_');

					addF.addFunc('同戶籍地址', function() {
						addF.setAddress(domicileF.setAddress());
						domicileF.focus(0, 0);
						addF.focus('a');
						addF.focus(0, 0);
					});

				});

	};

	/**
	 * 初始化 initialization
	 * @return
	 */
	function initialization_setup() {
		//if(typeof CeL!=='undefined')
		try {
			//CeL.cache_code = true;
			//	Initialize log function

			CeL.set_run(
					'application.debug.log',
					[
							function() {
								CeL.Log.set_board('panel_for_log');
								CeL.debug('Log panel setted.');
								/**
								 * alias of CeL.set_run
								 */
								sr = CeL.set_run;

								var e = 0;
								try {
									sr(
											'interact.DOM',
											initialization_work,
											function() {
												CeL
														.get_element('error_load_panel').style.display = 'none';
											});

								} catch (e) {
									CeL.warn('Initialization failed!');
									CeL.err(e);
								}

								CeL.log.max_length = 0;
								CeL.log('Initialization '
										+ (e ? 'error' : 'finished') + '.');
							}, "lib/jquery-nightly.js", "lib/swfobject.js" ]);

		} catch (e) {
			//	show the error panel
			try {
				if (location.protocol === 'file:')
					document.getElementById('loading_error_message').innerHTML =
					//	** 較新之 browser 通常需要使用 callback 的方法，不能使用 "CeL.use('module');_do_some_thing_;"!!
					navigator.userAgent.indexOf('Chrome') === -1 ? CeL.get_file.error
							|| 'Loading local file error!'
							: 'You may <a href="http://code.google.com/p/chromium/issues/detail?id=4197#c26">add a flag_$ta --allow-file-access-from-files to run this tool._$tage.g., run '
									+ (navigator.userAgent.indexOf('Linux') !== -1 ? '/opt/google/chrome/google-chrome %U --allow-file-access-from-files&'
											: 'Chrome --allow-file-access-from-files')
									+ '_$tag__';

				document.getElementById('error_load_panel').style.position = 'static';
			} catch (e) {
			}
		}
	};

	//CeL.use('net.web',function(){});

	//
</script>

<!--
<script src="http://www.google.com/jsapi?key=ABQIAAAA8YsRfLuORC22bc07JTNYsBS3JAeykUxPSpDNfPvIbcz6s5aBrRRdn1nyUM_9cYox7ymS-IgI-2CNuA" type="text/javascript"></script>
<script type="text/javascript">
google.load("search", 1);
google.setOnLoadCallback(function(){
	if(new google.search.SearchControl())
		CeL.debug('API load OK.');
});
</script>
-->


<script type="text/javascript">//<![CDATA[
/*
	本 script 段落之存在是為了預防萬一。因此只能放最簡單的 script parser 亦能讀懂的 code。

	基本假設：通常能夠讀懂 CSS display:none; 的也能使用 DOM 來控制 error_load_panel 的顯示。
	但很遺憾的，對讀得懂 CSS 卻沒有 document.getElementById 的 Netscape Navigator 4，這不成立。
	因此不能用 display:none; 以從一開始避免顯示。

	此外，得考慮讀得懂 CSS 但關閉了 JavaScript 或因故不能執行的狀況。
	** limit: 上一段 code 不能出錯
*/

	/**
	 * 初始環境偵測
	 * @return
	 */
	function load_detect() {
		if (typeof initialization_setup == 'function')
			setTimeout(initialization_setup, 1);
		else if(typeof window == 'object' && typeof document == 'object' && window.document == document){
			//	message handle
			var mh = document.layers && document.layers['error_load_panel'];
			if (mh)
				//	NS4
				//mh.position = 'static';	指定 position 對 NS4 事實上無效用。
				mh.top = 8;

			else if(typeof error_load_panel == 'object' && (mh = error_load_panel.style))
				//	IE4
				//mh.position = 'static';	指定 position 對 IE4 事實上無效用。
				mh.top = '8px';

			//	下面的不行：NS3 會顯示出來 error_load_panel，但也會 alert。
			//else if(typeof alert != 'undefined') alert('Initialization error!');
		}
		//else alert('Initialization error!');
	}


	if(typeof CeL === 'function' && typeof CeL.set_run === 'function')
		CeL.set_run(load_detect);
	else
		window.onload = load_detect;

	//CeL.use('net.web');CeL.on_load(load_detect);

	//for(var i=0,j=0;i<1e9;i++)j++;

//]]></script>


</body>
</html>
